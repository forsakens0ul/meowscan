<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–µæ˜Ÿäººæ€§æ ¼é‰´å®šä¹¦ v1.0.0</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&d
        
        
        isplay=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Ma Shan Zheng', cursive;
            background: #FFF5E0;
            color: #6D4C3D;
            text-align: center;
            padding: 0;
            margin: 0;
        }
        .container {
            max-width: 100%;
            padding: 20px;
        }
        .cat-paw {
            width: 60px;
            animation: float 2s infinite alternate;
        }
        @keyframes float {
            from { transform: translateY(0); }
            to { transform: translateY(-15px); }
        }
        .btn {
            background: #FF9A76;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 18px;
            color: white;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .btn:hover {
            transform: scale(1.05);
            background: #FF6B6B;
        }
        .result-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px auto;
            max-width: 300px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .cat-img {
            width: 100%;
            border-radius: 15px;
            margin: 10px 0;
        }
        .hidden {
            display: none;
        }
        .footer {
            margin-top: 30px;
            font-size: 14px;
            color: #888;
        }
        .social-links {
            margin: 15px 0;
        }
        .social-links a {
            color: #6D4C3D;
            margin: 0 10px;
            font-size: 20px;
            text-decoration: none;
        }
        .language-selector {
            margin: 15px 0;
        }
        .language-selector select {
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid #FF9A76;
            background: white;
            color: #6D4C3D;
            font-family: 'Ma Shan Zheng', cursive;
        }
        .stats {
            font-size: 12px;
            margin-top: 10px;
        }
        .progress-bar {
            width: 80%;
            height: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            margin: 20px auto;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: #FF9A76;
            transition: width 0.3s;
        }
        .star-prompt {
            margin: 15px 0;
            font-size: 14px;
            color: #FF6B6B;
        }
        .history-item {
            background: white;
            border-radius: 10px;
            padding: 10px;
            margin: 10px auto;
            max-width: 80%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <!-- é¦–é¡µ -->
        <div v-if="stage === 'home'">
            <img src="https://img.icons8.com/ios-filled/100/000000/cat-footprint.png" class="cat-paw">
            <h1>{{ translations[language].title }}</h1>
            <p>{{ translations[language].subtitle }}<br>{{ translations[language].disclaimer }} ğŸ¾</p>
            <button class="btn" @click="stage = 'select'">{{ translations[language].startTest }}</button>
            
            <div class="social-links">
    <a href="https://github.com/forsakens0ul/mimi" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
    <a href="https://www.xiaohongshu.com/user/profile/5f3e9111000000000100b89e?xsec_token=YBPzuETgXi0DFdhOoF6T33ndGWLB1r2wMnk0_CaV4aBtE%3D&xsec_source=app_share&xhsshare=CopyLink&appuid=5f3e9111000000000100b89e&apptime=1746690135&share_id=5872be52bc044c3caab0aff4e24944eb&share_channel=copy_link" 
       target="_blank" title="å°çº¢ä¹¦"><i class="fas fa-book"></i></a>
    <a href="#" @click="showHistory = !showHistory" title="å†å²è®°å½•"><i class="fas fa-history"></i></a>
</div>
            
            <div class="language-selector">
                <select v-model="language">
                    <option value="zh">ä¸­æ–‡</option>
                    <option value="en">English</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                </select>
            </div>
            
            <div class="stats">
                {{ translations[language].visits }}: {{ visitCount }} | 
                {{ translations[language].visitors }}: {{ visitorCount }}
            </div>
            
            <div class="star-prompt">
                <i class="fas fa-star" style="color:#FFD700;"></i> {{ translations[language].ifUseful }}
            </div>
            
            <!-- å†å²è®°å½• -->
            <div v-if="showHistory && testHistory.length > 0" style="margin-top:20px;">
                <h3>{{ translations[language].history }}</h3>
                <div v-for="(item, index) in testHistory" :key="index" class="history-item">
                    <p><strong>{{ item.date }}</strong> - {{ item.catName }}</p>
                    <button class="btn" @click="viewHistoryResult(index)" style="padding:5px 10px;font-size:12px;">æŸ¥çœ‹è¯¦æƒ…</button>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•ç±»å‹é€‰æ‹© -->
        <div v-if="stage === 'select'">
            <h2>{{ translations[language].chooseMethod }}</h2>
            <button class="btn" @click="startTest('mbti')">ğŸ§™â€â™€ï¸ {{ translations[language].mbtiCat }}</button>
            <button class="btn" @click="startTest('bazi')">ğŸ® {{ translations[language].baziCat }}</button>
            <button class="btn" @click="stage = 'home'">{{ translations[language].back }}</button>
        </div>

        <!-- MBTIæµ‹è¯•é—®é¢˜ -->
        <div v-if="stage === 'test' && testType === 'mbti'">
            <h3>{{ translations[language].question }} {{ currentQuestion + 1 }}/{{ mbtiQuestions.length }}</h3>
            <div class="progress-bar">
                <div class="progress" :style="{width: ((currentQuestion + 1) / mbtiQuestions.length) * 100 + '%'}"></div>
            </div>
            <p>{{ mbtiQuestions[currentQuestion].text[language] }}</p>
            <div v-for="(option, index) in mbtiQuestions[currentQuestion].options" :key="index">
                <button class="btn" @click="answerQuestion(option.type)">{{ option.text[language] }}</button>
            </div>
            <button class="btn" @click="stage = 'select'" style="background: #ccc;">{{ translations[language].back }}</button>
        </div>

        <!-- å…«å­—æµ‹è¯•é—®é¢˜ -->
        <div v-if="stage === 'test' && testType === 'bazi'">
            <h3>{{ translations[language].enterBirthInfo }}</h3>
            <input type="date" v-model="birthDate" class="btn" style="width:80%">
            <button class="btn" @click="calculateBazi">{{ translations[language].calculate }}</button>
            <button class="btn" @click="stage = 'select'" style="background: #ccc;">{{ translations[language].back }}</button>
        </div>

        <!-- ç»“æœé¡µ -->
        <div v-if="stage === 'result'" class="result-card">
            <h2>ã€{{ translations[language].yourCat }}ã€‘{{ resultCat.name[language] }}</h2>
            <img :src="resultCat.image" class="cat-img">
            <p>ğŸ± {{ translations[language].analysis }}: {{ resultCat.description[language] }}<br>
            ğŸ’¡ {{ translations[language].reason }}: {{ resultCat.reason[language] }}</p>
            
            <button class="btn" @click="shareResult">{{ translations[language].share }}</button>
            <button class="btn" @click="stage = 'home'">{{ translations[language].testAgain }}</button>
            
            <div v-if="showAd" style="margin-top:20px;font-size:12px;">
                <p>{{ translations[language].adopt }} â†’ <a href="#">{{ translations[language].catShelter }}</a></p>
            </div>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                stage: 'home',
                testType: '',
                currentQuestion: 0,
                mbtiType: '',
                birthDate: '',
                resultCat: null,
                showAd: false,
                showHistory: false,
                language: 'zh',
                visitCount: 0,
                visitorCount: 0,
                testHistory: [],
                lastVisitTime: null,
                visitorId: null,
                translations: {
                    zh: {
                        title: 'å–µæ˜Ÿäººæ€§æ ¼é‰´å®šä¹¦',
                        subtitle: '10ç§’è§£é”ä½ çš„å¤©å‘½çŒ«çŒ«',
                        disclaimer: 'ä¸å‡†ä¸å‡†...æ‰æ€ªï¼',
                        startTest: 'ç«‹å³æµ‹å–µ',
                        chooseMethod: 'è¯·é€‰æ‹©ä½ çš„å åœæ–¹å¼',
                        mbtiCat: 'MBTIçŒ«æ ¼ç‰ˆ',
                        baziCat: 'å…«å­—å¸çŒ«æœ¯',
                        back: 'è¿”å›',
                        question: 'ç¬¬',
                        enterBirthInfo: 'è¾“å…¥ä½ çš„å‡ºç”Ÿä¿¡æ¯',
                        calculate: 'ç«‹å³æµ‹ç®—',
                        yourCat: 'ä½ çš„æœ¬å‘½çŒ«',
                        analysis: 'çŒ«æ ¼åˆ†æ',
                        reason: 'é€‚é…ç†ç”±',
                        share: 'æ™’çŒ«æ—æŠ¤ç…§',
                        testAgain: 'å†æµ‹ä¸€æ¬¡',
                        adopt: 'é¢†å…»çœŸå®çŒ«å’ª',
                        catShelter: 'å¹¿å‘Šä½æ‹›ç§Ÿ',
                        version: 'ç‰ˆæœ¬',
                        ifUseful: 'å¦‚æœè§‰å¾—å¥½ç”¨ï¼Œè¯·ç»™é¡¹ç›®ç‚¹ä¸ªâ­Starå§ï¼',
                        visits: 'è®¿é—®é‡',
                        visitors: 'è®¿å®¢æ•°',
                        history: 'å†å²è®°å½•'
                    },
                    en: {
                        title: 'Cat Personality Test',
                        subtitle: 'Discover your soulmate cat in 10 seconds',
                        disclaimer: 'Not accurate... just kidding!',
                        startTest: 'Start Test',
                        chooseMethod: 'Choose your divination method',
                        mbtiCat: 'MBTI Cat Version',
                        baziCat: 'Bazi Catology',
                        back: 'Back',
                        question: 'Question',
                        enterBirthInfo: 'Enter your birth information',
                        calculate: 'Calculate Now',
                        yourCat: 'Your Destiny Cat',
                        analysis: 'Personality Analysis',
                        reason: 'Matching Reason',
                        share: 'Share Result',
                        testAgain: 'Test Again',
                        adopt: 'Adopt a real cat',
                        catShelter: 'Advertising space for rent',
                        version: 'Version',
                        ifUseful: 'If you find it useful, please give us a â­Star!',
                        visits: 'Visits',
                        visitors: 'Visitors',
                        history: 'History',
                        
                    },
                    ja: {
                        title: 'çŒ«ã®æ€§æ ¼è¨ºæ–­',
                        subtitle: '10ç§’ã§ã‚ãªãŸã«ã´ã£ãŸã‚Šã®çŒ«ã‚’ç™ºè¦‹',
                        disclaimer: 'å½“ãŸã‚‰ãªã„...å˜˜ã§ã™ï¼',
                        startTest: 'è¨ºæ–­ã‚’é–‹å§‹',
                        chooseMethod: 'å ã„æ–¹æ³•ã‚’é¸æŠ',
                        mbtiCat: 'MBTIçŒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³',
                        baziCat: 'å…«å­—çŒ«å ã„',
                        back: 'æˆ»ã‚‹',
                        question: 'è³ªå•',
                        enterBirthInfo: 'ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›',
                        calculate: 'è¨ºæ–­ã™ã‚‹',
                        yourCat: 'ã‚ãªãŸã«ã´ã£ãŸã‚Šã®çŒ«',
                        analysis: 'æ€§æ ¼åˆ†æ',
                        reason: 'ç›¸æ€§ã®ç†ç”±',
                        share: 'çµæœã‚’ã‚·ã‚§ã‚¢',
                        testAgain: 'ã‚‚ã†ä¸€åº¦è¨ºæ–­',
                        adopt: 'å®Ÿéš›ã®çŒ«ã‚’è¿ãˆã‚‹',
                        catShelter: 'åºƒå‘Šæ‰€ã®ãƒ†ãƒŠãƒ³ãƒˆå‹Ÿé›†',
                        version: 'ãƒãƒ¼ã‚¸ãƒ§ãƒ³',
                        ifUseful: 'æ°—ã«å…¥ã£ãŸã‚‰â­ã‚¹ã‚¿ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼',
                        visits: 'è¨ªå•æ•°',
                        visitors: 'è¨ªå•è€…æ•°',
                        history: 'å±¥æ­´'
                    }
                },
                mbtiQuestions: [
    {
        text: {
            zh: "å‘¨æœ«ä½ æ›´æ„¿æ„å¦‚ä½•åº¦è¿‡ï¼Ÿ",
            en: "How would you prefer to spend your weekend?",
            ja: "é€±æœ«ã¯ã©ã®ã‚ˆã†ã«éã”ã—ãŸã„ã§ã™ã‹ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "å’ŒçŒ«å‹èšä¼šï¼ˆå¤–å‘Eï¼‰",
                    en: "Hang out with cat friends (Extrovert E)",
                    ja: "çŒ«å‹é”ã¨é›†ã¾ã‚‹ï¼ˆå¤–å‘å‹Eï¼‰"
                },
                type: "E" 
            },
            { 
                text: {
                    zh: "ç‹¬è‡ªæ’¸çŒ«ï¼ˆå†…å‘Iï¼‰",
                    en: "Pet cats alone (Introvert I)",
                    ja: "ä¸€äººã§çŒ«ã‚’æ’«ã§ã‚‹ï¼ˆå†…å‘å‹Iï¼‰"
                },
                type: "I" 
            }
        ]
    },
    {
        text: {
            zh: "é‡åˆ°çŒ«å’ªæ£ä¹±æ—¶ä½ ä¼šï¼Ÿ",
            en: "When your cat makes trouble, you will?",
            ja: "çŒ«ãŒã„ãŸãšã‚‰ã—ãŸæ™‚ã€ã‚ãªãŸã¯ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "å…ˆæ‹ç…§å‘æœ‹å‹åœˆï¼ˆç›´è§‰Nï¼‰",
                    en: "Take photos and post first (Intuition N)",
                    ja: "ã¾ãšå†™çœŸã‚’æ’®ã£ã¦SNSã«æŠ•ç¨¿ï¼ˆç›´è¦³Nï¼‰"
                },
                type: "N" 
            },
            { 
                text: {
                    zh: "ç«‹å³æ”¶æ‹¾æ®‹å±€ï¼ˆå®æ„ŸSï¼‰",
                    en: "Clean up immediately (Sensing S)",
                    ja: "ã™ãã«å¾Œç‰‡ä»˜ã‘ã‚’ã™ã‚‹ï¼ˆæ„Ÿè¦šSï¼‰"
                },
                type: "S" 
            }
        ]
    },
    {
        text: {
            zh: "é€‰æ‹©çŒ«ç²®æ—¶ä½ æ›´æ³¨é‡ï¼Ÿ",
            en: "When choosing cat food, you pay more attention to?",
            ja: "ã‚­ãƒ£ãƒƒãƒˆãƒ•ãƒ¼ãƒ‰ã‚’é¸ã¶æ™‚ã€ã‚ˆã‚Šé‡è¦–ã™ã‚‹ã®ã¯ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "è¥å…»æˆåˆ†è¡¨ï¼ˆæ€è€ƒTï¼‰",
                    en: "Nutrition facts (Thinking T)",
                    ja: "æ „é¤Šæˆåˆ†è¡¨ï¼ˆæ€è€ƒTï¼‰"
                },
                type: "T" 
            },
            { 
                text: {
                    zh: "çŒ«å’ªåƒå¾—å¼€å¿ƒï¼ˆæƒ…æ„ŸFï¼‰",
                    en: "Cat's enjoyment (Feeling F)",
                    ja: "çŒ«ãŒå–œã‚“ã§é£Ÿã¹ã‚‹æ§˜å­ï¼ˆæ„Ÿæƒ…Fï¼‰"
                },
                type: "F" 
            }
        ]
    },
    {
        text: {
            zh: "ä½ çš„å…»çŒ«è®¡åˆ’é€šå¸¸æ˜¯ï¼Ÿ",
            en: "Your cat care routine is usually?",
            ja: "ã‚ãªãŸã®çŒ«ã®ãŠä¸–è©±ã®è¨ˆç”»ã¯é€šå¸¸ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "ä¸¥æ ¼æŒ‰æ—¶é—´è¡¨ï¼ˆåˆ¤æ–­Jï¼‰",
                    en: "Strictly follow schedule (Judging J)",
                    ja: "å³å¯†ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é€šã‚Šï¼ˆåˆ¤æ–­Jï¼‰"
                },
                type: "J" 
            },
            { 
                text: {
                    zh: "çœ‹å¿ƒæƒ…éšæ€§æ¥ï¼ˆæ„ŸçŸ¥Pï¼‰",
                    en: "Flexible based on mood (Perceiving P)",
                    ja: "æ°—åˆ†ã§è‡¨æ©Ÿå¿œå¤‰ã«ï¼ˆçŸ¥è¦šPï¼‰"
                },
                type: "P" 
            }
        ]
    },
    {
        text: {
            zh: "çŒ«å’ªç”Ÿç—…æ—¶ä½ çš„ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ",
            en: "When your cat gets sick, your first reaction is?",
            ja: "çŒ«ãŒç—…æ°—ã®æ™‚ã€ã‚ãªãŸã®æœ€åˆã®åå¿œã¯ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "å†·é™åˆ†æç—‡çŠ¶ï¼ˆæ€è€ƒTï¼‰",
                    en: "Calmly analyze symptoms (Thinking T)",
                    ja: "å†·é™ã«ç—‡çŠ¶ã‚’åˆ†æï¼ˆæ€è€ƒTï¼‰"
                },
                type: "T" 
            },
            { 
                text: {
                    zh: "éå¸¸æ‹…å¿ƒç„¦è™‘ï¼ˆæƒ…æ„ŸFï¼‰",
                    en: "Worry and feel anxious (Feeling F)",
                    ja: "ã¨ã¦ã‚‚å¿ƒé…ã§ä¸å®‰ã«ãªã‚‹ï¼ˆæ„Ÿæƒ…Fï¼‰"
                },
                type: "F" 
            }
        ]
    },
    {
        text: {
            zh: "ä½ æ›´å–œæ¬¢å“ªç§çŒ«å’ªï¼Ÿ",
            en: "Which type of cat do you prefer?",
            ja: "ã©ã®ã‚¿ã‚¤ãƒ—ã®çŒ«ãŒå¥½ãã§ã™ã‹ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "æ´»æ³¼å¥½åŠ¨çš„ï¼ˆå¤–å‘Eï¼‰",
                    en: "Active and playful (Extrovert E)",
                    ja: "æ´»ç™ºã§éŠã³å¥½ãï¼ˆå¤–å‘å‹Eï¼‰"
                },
                type: "E" 
            },
            { 
                text: {
                    zh: "å®‰é™æ…µæ‡’çš„ï¼ˆå†…å‘Iï¼‰",
                    en: "Quiet and lazy (Introvert I)",
                    ja: "é™ã‹ã§ã®ã‚“ã³ã‚Šï¼ˆå†…å‘å‹Iï¼‰"
                },
                type: "I" 
            }
        ]
    },
    {
        text: {
            zh: "ç»™çŒ«å’ªæ‹ç…§æ—¶ä½ ä¼šï¼Ÿ",
            en: "When taking photos of cats, you will?",
            ja: "çŒ«ã®å†™çœŸã‚’æ’®ã‚‹æ™‚ã€ã‚ãªãŸã¯ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "ç²¾å¿ƒè®¾è®¡åœºæ™¯ï¼ˆåˆ¤æ–­Jï¼‰",
                    en: "Carefully design the scene (Judging J)",
                    ja: "å¿µå…¥ã‚Šã«ã‚·ãƒ¼ãƒ³ã‚’è¨­è¨ˆï¼ˆåˆ¤æ–­Jï¼‰"
                },
                type: "J" 
            },
            { 
                text: {
                    zh: "æ•æ‰è‡ªç„¶ç¬é—´ï¼ˆæ„ŸçŸ¥Pï¼‰",
                    en: "Capture natural moments (Perceiving P)",
                    ja: "è‡ªç„¶ãªç¬é–“ã‚’æ‰ãˆã‚‹ï¼ˆçŸ¥è¦šPï¼‰"
                },
                type: "P" 
            }
        ]
    },
    {
        text: {
            zh: "çœ‹åˆ°æµæµªçŒ«æ—¶ä½ ä¼šï¼Ÿ",
            en: "When you see a stray cat, you will?",
            ja: "é‡è‰¯çŒ«ã‚’è¦‹ã‹ã‘ãŸæ™‚ã€ã‚ãªãŸã¯ï¼Ÿ"
        },
        options: [
            { 
                text: {
                    zh: "æƒ³è±¡å®ƒçš„æ•…äº‹ï¼ˆç›´è§‰Nï¼‰",
                    en: "Imagine its story (Intuition N)",
                    ja: "ãã®çŒ«ã®ç‰©èªã‚’æƒ³åƒã™ã‚‹ï¼ˆç›´è¦³Nï¼‰"
                },
                type: "N" 
            },
            { 
                text: {
                    zh: "è§‚å¯Ÿå®ƒçš„çŠ¶æ€ï¼ˆå®æ„ŸSï¼‰",
                    en: "Observe its condition (Sensing S)",
                    ja: "ãã®çŒ«ã®çŠ¶æ…‹ã‚’è¦³å¯Ÿã™ã‚‹ï¼ˆæ„Ÿè¦šSï¼‰"
                },
                type: "S" 
            }
        ]
    }
],
                catDatabase: {
                
    "INTJ": {
        name: {zh: "é«˜å†·ä¿„ç½—æ–¯è“çŒ«", en: "Aloof Russian Blue", ja: "ã‚¯ãƒ¼ãƒ«ãªãƒ­ã‚·ã‚¢ãƒ³ãƒ–ãƒ«ãƒ¼"},
        image: "https://cdn.pixabay.com/photo/2017/02/20/18/03/cat-2083492_640.jpg",
        description: {zh: "æ™ºå•†çˆ†è¡¨çš„çŒ«ä¸­å“²å­¦å®¶", en: "The feline philosopher with exceptional IQ", ja: "çŸ¥èƒ½æŒ‡æ•°ãŒé«˜ã„çŒ«ã®å“²å­¦è€…"},
        reason: {zh: "ä½ ä»¬éƒ½æ˜¯ç†æ€§è‡³ä¸Šä¸»ä¹‰è€…ï¼Œæ“…é•¿ç”¨çœ¼ç¥è¡¨è¾¾'æ„šè ¢çš„äººç±»'", en: "You are both rationalists, good at expressing 'stupid humans' with your eyes", ja: "ã‚ãªãŸãŸã¡ã¯ç†æ€§è‡³ä¸Šä¸»ç¾©è€…ã§ã€ç›®ã§ã€Œæ„šã‹ãªäººé–“ã€ã‚’è¡¨ç¾ã™ã‚‹ã®ãŒå¾—æ„ã§ã™"}
    },
    "INTP": {
        name: {zh: "æ€è€ƒè€…è‹æ ¼å…°æŠ˜è€³çŒ«", en: "Thinker Scottish Fold", ja: "æ€æƒ³å®¶ã®ã‚¹ã‚³ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰"},
        image: "https://cdn.pixabay.com/photo/2015/03/27/13/16/cat-694730_640.jpg",
        description: {zh: "å¥½å¥‡å¿ƒæ—ºç››çš„çŒ«ä¸­ç§‘å­¦å®¶", en: "The feline scientist with endless curiosity", ja: "å¥½å¥‡å¿ƒæ—ºç››ãªçŒ«ã®ç§‘å­¦è€…"},
        reason: {zh: "ä½ ä»¬éƒ½å–œæ¬¢ç‹¬ç«‹æ€è€ƒï¼Œå¸¸å¸¸é™·å…¥è‡ªå·±çš„ä¸–ç•Œ", en: "You both enjoy independent thinking and often get lost in your own world", ja: "ã‚ãªãŸãŸã¡ã¯ç‹¬ç«‹ã—ãŸæ€è€ƒãŒå¥½ãã§ã€ã‚ˆãè‡ªåˆ†ã®ä¸–ç•Œã«æ²¡é ­ã—ã¾ã™"}
    },
    "ENTJ": {
        name: {zh: "é¢†è¢–å‹ç¼…å› çŒ«", en: "Leader Maine Coon", ja: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã®ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ¼ãƒ³"},
        image: "https://cdn.pixabay.com/photo/2017/07/25/01/22/cat-2536662_640.jpg",
        description: {zh: "æ°”åœºå¼ºå¤§çš„çŒ«ä¸­CEO", en: "The feline CEO with powerful presence", ja: "å­˜åœ¨æ„ŸãŒå¼·ã„çŒ«ã®CEO"},
        reason: {zh: "ä½ ä»¬éƒ½æœ‰é¢†å¯¼æ°”è´¨ï¼Œå–œæ¬¢æŒæ§å±€é¢", en: "You both have leadership qualities and like to control situations", ja: "ã‚ãªãŸãŸã¡ã¯ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã®è³‡è³ªãŒã‚ã‚Šã€çŠ¶æ³ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã®ãŒå¥½ãã§ã™"}
    },
    "ENTP": {
        name: {zh: "è¾©è®ºå®¶å¾·æ–‡å·æ¯›çŒ«", en: "Debater Devon Rex", ja: "è¨è«–å®¶ã®ãƒ‡ãƒœãƒ³ãƒ¬ãƒƒã‚¯ã‚¹"},
        image: "https://cdn.pixabay.com/photo/2014/04/13/20/49/cat-323262_640.jpg",
        description: {zh: "æœºçµå¤æ€ªçš„çŒ«ä¸­å‘æ˜å®¶", en: "The feline inventor with clever eccentricity", ja: "è³¢ãé¢¨å¤‰ã‚ã‚ŠãªçŒ«ã®ç™ºæ˜å®¶"},
        reason: {zh: "ä½ ä»¬éƒ½èƒ½ç”¨åˆ›æ„å’Œå¹½é»˜åŒ–è§£å°´å°¬", en: "You both can use creativity and humor to defuse awkwardness", ja: "ã‚ãªãŸãŸã¡ã¯å‰µé€ æ€§ã¨ãƒ¦ãƒ¼ãƒ¢ã‚¢ã§æ°—ã¾ãšã•ã‚’è§£æ¶ˆã§ãã¾ã™"}
    },
    "INFJ": {
        name: {zh: "æ²»æ„ˆç³»å¸ƒå¶çŒ«", en: "Healer Ragdoll", ja: "ç™’ã—ç³»ã®ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«"},
        image: "https://cdn.pixabay.com/photo/2015/11/16/14/43/cat-1045782_640.jpg",
        description: {zh: "æ¸©æŸ”ä½“è´´çš„çŒ«ä¸­å¿ƒç†å’¨è¯¢å¸ˆ", en: "The feline counselor with gentle care", ja: "å„ªã—ãæ€ã„ã‚„ã‚ŠãŒã‚ã‚‹çŒ«ã®ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼"},
        reason: {zh: "ä½ ä»¬éƒ½èƒ½æ•é”å¯Ÿè§‰ä»–äººæƒ…ç»ª", en: "You both can keenly perceive others' emotions", ja: "ã‚ãªãŸãŸã¡ã¯ä»–äººã®æ„Ÿæƒ…ã‚’é‹­ãå¯ŸçŸ¥ã§ãã¾ã™"}
    },
    "INFP": {
        name: {zh: "ç†æƒ³ä¸»ä¹‰æš¹ç½—çŒ«", en: "Idealist Siamese", ja: "ç†æƒ³ä¸»ç¾©è€…ã®ã‚·ãƒ£ãƒ çŒ«"},
        image: "https://cdn.pixabay.com/photo/2015/11/16/22/14/cat-1046544_640.jpg",
        description: {zh: "æƒ…æ„Ÿä¸°å¯Œçš„çŒ«ä¸­è¯—äºº", en: "The feline poet with rich emotions", ja: "æ„Ÿæƒ…è±Šã‹ãªçŒ«ã®è©©äºº"},
        reason: {zh: "ä½ ä»¬éƒ½æœ‰ä¸°å¯Œçš„å†…å¿ƒä¸–ç•Œ", en: "You both have rich inner worlds", ja: "ã‚ãªãŸãŸã¡ã¯è±Šã‹ãªå†…é¢ä¸–ç•Œã‚’æŒã£ã¦ã„ã¾ã™"}
    },
    "ENFJ": {
        name: {zh: "æ•™è‚²å®¶é˜¿æ¯”è¥¿å°¼äºšçŒ«", en: "Educator Abyssinian", ja: "æ•™è‚²è€…ã®ã‚¢ãƒ“ã‚·ãƒ‹ã‚¢ãƒ³"},
        image: "https://cdn.pixabay.com/photo/2017/11/09/21/41/cat-2934720_640.jpg",
        description: {zh: "çƒ­æƒ…æ´‹æº¢çš„çŒ«ä¸­å¯¼å¸ˆ", en: "The feline mentor with enthusiastic passion", ja: "æƒ…ç†±çš„ãªçŒ«ã®ãƒ¡ãƒ³ã‚¿ãƒ¼"},
        reason: {zh: "ä½ ä»¬éƒ½å–œæ¬¢é¼“åŠ±å’Œå¸®åŠ©ä»–äºº", en: "You both enjoy encouraging and helping others", ja: "ã‚ãªãŸãŸã¡ã¯ä»–äººã‚’åŠ±ã¾ã—åŠ©ã‘ã‚‹ã®ãŒå¥½ãã§ã™"}
    },
    "ENFP": {
        name: {zh: "è¯ç—¨æš¹ç½—çŒ«", en: "Chatterbox Siamese", ja: "ãŠã—ã‚ƒã¹ã‚Šãªã‚·ãƒ£ãƒ çŒ«"},
        image: "https://cdn.pixabay.com/photo/2018/05/07/10/48/cat-3380960_640.jpg",
        description: {zh: "ç¤¾äº¤ç‰›é€¼ç—‡æ‚£è€…", en: "The feline with extreme social skills", ja: "ç¤¾äº¤æ€§æŠœç¾¤ã®çŒ«"},
        reason: {zh: "ä½ ä»¬éƒ½èƒ½åœ¨5åˆ†é’Ÿå†…å’Œé™Œç”Ÿäººæˆä¸ºæœ‹å‹", en: "You both can become friends with strangers within 5 minutes", ja: "ã‚ãªãŸãŸã¡ã¯5åˆ†ä»¥å†…ã«è¦‹çŸ¥ã‚‰ã¬äººã¨å‹é”ã«ãªã‚Œã¾ã™"}
    },
    "ISTJ": {
        name: {zh: "åŠ¡å®å‹è‹±å›½çŸ­æ¯›çŒ«", en: "Practical British Shorthair", ja: "ç¾å®Ÿä¸»ç¾©è€…ã®ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢"},
        image: "https://cdn.pixabay.com/photo/2014/03/29/09/17/cat-300572_640.jpg",
        description: {zh: "å¯é å®ˆæ—¶çš„çŒ«ä¸­å…¬åŠ¡å‘˜", en: "The feline civil servant who's reliable and punctual", ja: "ä¿¡é ¼ã§ãæ™‚é–“ã‚’å®ˆã‚‹çŒ«ã®å…¬å‹™å“¡"},
        reason: {zh: "ä½ ä»¬éƒ½é‡è§†ä¼ ç»Ÿå’Œè§„åˆ™", en: "You both value traditions and rules", ja: "ã‚ãªãŸãŸã¡ã¯ä¼çµ±ã¨è¦å‰‡ã‚’é‡è¦–ã—ã¾ã™"}
    },
    "ISFJ": {
        name: {zh: "å®ˆæŠ¤è€…æ³¢æ–¯çŒ«", en: "Protector Persian", ja: "å®ˆè­·è€…ã®ãƒšãƒ«ã‚·ãƒ£çŒ«"},
        image: "https://cdn.pixabay.com/photo/2015/01/31/12/36/cat-618470_640.jpg",
        description: {zh: "æ¸©æŸ”é¡¾å®¶çš„çŒ«ä¸­æŠ¤å£«", en: "The feline nurse who's gentle and family-oriented", ja: "å„ªã—ãå®¶åº­çš„ãªçŒ«ã®çœ‹è­·å¸«"},
        reason: {zh: "ä½ ä»¬éƒ½ä¹äºç…§é¡¾ä»–äºº", en: "You both enjoy taking care of others", ja: "ã‚ãªãŸãŸã¡ã¯ä»–äººã®ä¸–è©±ã‚’ã™ã‚‹ã®ãŒå¥½ãã§ã™"}
    },
    "ESTJ": {
        name: {zh: "ç®¡ç†è€…ç¾å›½çŸ­æ¯›çŒ«", en: "Manager American Shorthair", ja: "ç®¡ç†è€…ã®ã‚¢ãƒ¡ãƒªã‚«ãƒ³ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢"},
        image: "https://cdn.pixabay.com/photo/2017/03/14/14/49/cat-2143332_640.jpg",
        description: {zh: "æ•ˆç‡è‡³ä¸Šçš„çŒ«ä¸­é¡¹ç›®ç»ç†", en: "The feline project manager who prioritizes efficiency", ja: "åŠ¹ç‡ã‚’æœ€å„ªå…ˆã™ã‚‹çŒ«ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"},
        reason: {zh: "ä½ ä»¬éƒ½æ“…é•¿ç»„ç»‡å’Œæ‰§è¡Œ", en: "You both excel at organizing and executing", ja: "ã‚ãªãŸãŸã¡ã¯çµ„ç¹”åŒ–ã¨å®Ÿè¡ŒãŒå¾—æ„ã§ã™"}
    },
    "ESFJ": {
        name: {zh: "ç…§é¡¾è€…åŠ è²çŒ«", en: "Caregiver Garfield", ja: "ä¸–è©±å¥½ãã®ã‚¬ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰"},
        image: "https://cdn.pixabay.com/photo/2015/11/16/22/14/cat-1046544_640.jpg",
        description: {zh: "æ¸©æš–è´´å¿ƒçš„çŒ«ä¸­æ´¾å¯¹ç­–åˆ’", en: "The feline party planner who's warm and considerate", ja: "æ¸©ã‹ãæ€ã„ã‚„ã‚ŠãŒã‚ã‚‹çŒ«ã®ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼"},
        reason: {zh: "ä½ ä»¬éƒ½çƒ­çˆ±ç¤¾äº¤å’Œç…§é¡¾ä»–äºº", en: "You both love socializing and caring for others", ja: "ã‚ãªãŸãŸã¡ã¯ç¤¾äº¤ã¨ä»–äººã®ä¸–è©±ã‚’ã™ã‚‹ã®ãŒå¤§å¥½ãã§ã™"}
    },
    "ISTP": {
        name: {zh: "å·§åŒ å‹è±¹çŒ«", en: "Craftsman Bengal", ja: "è·äººæ°—è³ªã®ãƒ™ãƒ³ã‚¬ãƒ«"},
        image: "https://cdn.pixabay.com/photo/2017/01/20/21/22/cat-1996421_640.jpg",
        description: {zh: "å†·é™æ²‰ç€çš„çŒ«ä¸­æœºæ¢°å¸ˆ", en: "The feline mechanic who's calm and composed", ja: "å†·é™æ²ˆç€ãªçŒ«ã®æ•´å‚™å£«"},
        reason: {zh: "ä½ ä»¬éƒ½æ“…é•¿è§£å†³å®é™…é—®é¢˜", en: "You both are good at solving practical problems", ja: "ã‚ãªãŸãŸã¡ã¯å®Ÿéš›çš„ãªå•é¡Œã‚’è§£æ±ºã™ã‚‹ã®ãŒå¾—æ„ã§ã™"}
    },
    "ISFP": {
        name: {zh: "è‰ºæœ¯å®¶é‡‘å‰æ‹‰çŒ«", en: "Artist Chinchilla", ja: "èŠ¸è¡“å®¶ã®ãƒãƒ³ãƒãƒ©"},
        image: "https://cdn.pixabay.com/photo/2014/04/13/20/49/cat-323262_640.jpg",
        description: {zh: "æ•æ„Ÿç»†è…»çš„çŒ«ä¸­ç”»å®¶", en: "The feline painter who's sensitive and delicate", ja: "æ•æ„Ÿã§ç¹Šç´°ãªçŒ«ã®ç”»å®¶"},
        reason: {zh: "ä½ ä»¬éƒ½é‡è§†å½“ä¸‹çš„ç¾æ„Ÿä½“éªŒ", en: "You both value present aesthetic experiences", ja: "ã‚ãªãŸãŸã¡ã¯ç¾åœ¨ã®ç¾çš„ä½“é¨“ã‚’é‡è¦–ã—ã¾ã™"}
    },
    "ESTP": {
        name: {zh: "å†’é™©å®¶å­ŸåŠ æ‹‰çŒ«", en: "Adventurer Bengal", ja: "å†’é™ºå®¶ã®ãƒ™ãƒ³ã‚¬ãƒ«"},
        image: "https://cdn.pixabay.com/photo/2015/04/23/21/59/cat-736877_640.jpg",
        description: {zh: "æ´»åŠ›å››å°„çš„çŒ«ä¸­è¿åŠ¨å‘˜", en: "The feline athlete full of vitality", ja: "æ´»åŠ›ã«æº€ã¡ãŸçŒ«ã®é‹å‹•é¸æ‰‹"},
        reason: {zh: "ä½ ä»¬éƒ½çƒ­çˆ±å†’é™©å’Œåˆºæ¿€", en: "You both love adventure and excitement", ja: "ã‚ãªãŸãŸã¡ã¯å†’é™ºã¨åˆºæ¿€ãŒå¤§å¥½ãã§ã™"}
    },
    "ESFP": {
        name: {zh: "è¡¨æ¼”è€…åœŸè€³å…¶å®‰å“¥æ‹‰çŒ«", en: "Performer Turkish Angora", ja: "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ¼ã®ã‚¿ãƒ¼ã‚­ãƒƒã‚·ãƒ¥ã‚¢ãƒ³ã‚´ãƒ©"},
        image: "https://cdn.pixabay.com/photo/2015/01/31/12/36/cat-618470_640.jpg",
        description: {zh: "é­…åŠ›åè¶³çš„çŒ«ä¸­æ˜æ˜Ÿ", en: "The feline star with charming charisma", ja: "é­…åŠ›ãŸã£ã·ã‚Šã®çŒ«ã®ã‚¹ã‚¿ãƒ¼"},
        reason: {zh: "ä½ ä»¬éƒ½æ“…é•¿æ´»è·ƒæ°”æ°›", en: "You both are good at livening up the atmosphere", ja: "ã‚ãªãŸãŸã¡ã¯é›°å›²æ°—ã‚’ç››ã‚Šä¸Šã’ã‚‹ã®ãŒå¾—æ„ã§ã™"}
    },
    "default": {
        name: {zh: "ä¸­åæ°”æ­»çŒ«", en: "Chinese Qi-Si Cat", ja: "ãƒãƒ£ã‚¤ãƒ‹ãƒ¼ã‚ºãƒ»ãƒãƒ¼ã‚¹çŒ«"},
        image: "https://cdn.pixabay.com/photo/2014/04/13/20/49/cat-323262_640.jpg",
        description: {zh: "åˆæ‡’åˆé¦‹ä½†æ²»æ„ˆåŠ›MAX", en: "Lazy and greedy but with MAX healing power", ja: "æ€ ã‘è€…ã§é£Ÿã„ã—ã‚“åŠã ãŒã€ç™’ã—åŠ¹æœMAX"},
        reason: {zh: "ä½ ä»¬ç»„åˆèµ·æ¥å°±æ˜¯'èººå¹³ç•Œ'çš„é»„é‡‘CP", en: "Together you are the golden CP of 'lying flat'", ja: "ã‚ãªãŸãŸã¡ã®çµ„ã¿åˆã‚ã›ã¯ã€Œå¯ãã¹ã‚Šç•Œã€ã®é»„é‡‘ã‚«ãƒƒãƒ—ãƒ«ã§ã™"}
    }
}
            },
            methods: {
                startTest(type) {
        this.testType = type;
        this.stage = 'test';
        this.currentQuestion = 0;
        this.mbtiType = '';
        this.mbtiCounts = {
            E: 0, I: 0, N: 0, S: 0,
            T: 0, F: 0, J: 0, P: 0
        };
        this.trackEvent('start_test', { test_type: type });
    },
    answerQuestion(type) {
        this.mbtiCounts[type]++;
        
        if (this.currentQuestion < this.mbtiQuestions.length - 1) {
            this.currentQuestion++;
        } else {
            this.determineMBTIType();
        }
    },
    determineMBTIType() {
        const EI = this.mbtiCounts.E > this.mbtiCounts.I ? 'E' : 'I';
        const NS = this.mbtiCounts.N > this.mbtiCounts.S ? 'N' : 'S';
        const TF = this.mbtiCounts.T > this.mbtiCounts.F ? 'T' : 'F';
        const JP = this.mbtiCounts.J > this.mbtiCounts.P ? 'J' : 'P';
        
        this.mbtiType = EI + NS + TF + JP;
        this.showResult();
    },
                calculateBazi() {
                    if (!this.birthDate) {
                        alert(this.translations[this.language].enterBirthInfo);
                        return;
                    }
                    const month = new Date(this.birthDate).getMonth() + 1;
                    const day = new Date(this.birthDate).getDate();
                    
                    const types = ["INTJ", "INTP", "ENTJ", "ENTP", "INFJ", "INFP", "ENFJ", "ENFP", 
                                  "ISTJ", "ISFJ", "ESTJ", "ESFJ", "ISTP", "ISFP", "ESTP", "ESFP"];
                    const index = (month * day) % types.length;
                    this.mbtiType = types[index];
                    
                    this.showResult();
                },
                showResult() {
                    this.resultCat = this.catDatabase[this.mbtiType] || this.catDatabase["default"];
                    this.stage = 'result';
                    setTimeout(() => { this.showAd = true }, 2000);
                    
                    this.saveToHistory();
                    
                    this.trackEvent('test_complete', {
                        test_type: this.testType,
                        result_type: this.mbtiType
                    });
                },
                shareResult() {
                    this.trackEvent('share_result', {
                        test_type: this.testType,
                        result_type: this.mbtiType
                    });
                    
                    alert(this.translations[this.language].share + "\n" + 
                          "å®é™…é¡¹ç›®éœ€æ¥å…¥å¾®ä¿¡SDKæˆ–åˆ†äº«API");
                },
                saveToHistory() {
                    const historyItem = {
                        date: new Date().toLocaleString(),
                        catName: this.resultCat.name[this.language],
                        mbtiType: this.mbtiType,
                        result: this.resultCat
                    };
                    
                    this.testHistory.unshift(historyItem);
                    localStorage.setItem('catTestHistory', JSON.stringify(this.testHistory));
                },
                viewHistoryResult(index) {
                    this.resultCat = this.testHistory[index].result;
                    this.stage = 'result';
                },
                updateVisitStats: async function() {
                    try {
                        await fetch('/api/personality-analytics', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                event: 'page_view',
                                data: {
                                    page_title: 'å–µæ˜Ÿäººæ€§æ ¼é‰´å®šä¹¦',
                                    page_location: window.location.href,
                                    page_path: window.location.pathname
                                }
                            })
                        });

                    const now = new Date().getTime();
                        const lastVisit = localStorage.getItem('lastVisitTime');
                        const visitorId = localStorage.getItem('visitorId');
                        
                        if (!visitorId) {
                            const newVisitorId = 'visitor_' + Math.random().toString(36).substr(2, 9);
                            localStorage.setItem('visitorId', newVisitorId);
                            this.visitorId = newVisitorId;
                            
                            const currentVisitors = parseInt(localStorage.getItem('visitorCount') || '0');
                            localStorage.setItem('visitorCount', currentVisitors + 1);
                            this.visitorCount = currentVisitors + 1;
                        } else {
                            this.visitorId = visitorId;
                        }
                        
                        const currentVisits = parseInt(localStorage.getItem('visitCount') || '0');
                        localStorage.setItem('visitCount', currentVisits + 1);
                        this.visitCount = currentVisits + 1;
                        
                        localStorage.setItem('lastVisitTime', now);
                        this.lastVisitTime = now;
                        
                        if (!lastVisit || (now - parseInt(lastVisit)) > 24 * 60 * 60 * 1000) {
                            const currentVisitors = parseInt(localStorage.getItem('visitorCount') || '0');
                            localStorage.setItem('visitorCount', currentVisitors + 1);
                            this.visitorCount = currentVisitors + 1;
                        }
                    } catch (error) {
                        console.error('ç»Ÿè®¡æ›´æ–°å¤±è´¥:', error);
                    }
                },
                trackEvent: async function(eventName, eventParams = {}) {
                    try {
                        await fetch('/api/personality-analytics', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                event: eventName,
                                data: eventParams
                            })
                        });
                    } catch (error) {
                        console.error('äº‹ä»¶è·Ÿè¸ªå¤±è´¥:', error);
                    }
                },
                loadVisitStats() {
                    this.visitCount = parseInt(localStorage.getItem('visitCount') || '0');
                    this.visitorCount = parseInt(localStorage.getItem('visitorCount') || '0');
                    this.lastVisitTime = localStorage.getItem('lastVisitTime');
                    this.visitorId = localStorage.getItem('visitorId');
                }
            },
            mounted() {
                const savedLang = localStorage.getItem('catTestLang');
                if (savedLang) this.language = savedLang;
                
                this.loadVisitStats();
                this.updateVisitStats();
                
                const savedHistory = localStorage.getItem('catTestHistory');
                if (savedHistory) {
                    this.testHistory = JSON.parse(savedHistory);
                }
            },
            watch: {
                language(newLang) {
                    localStorage.setItem('catTestLang', newLang);
                }
            }
        });
    </script>
</body>
</html>
