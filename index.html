<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–µæ˜Ÿäººæ€§æ ¼é‰´å®šä¹¦ v1.0.0</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&d
        
        
        isplay=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Ma Shan Zheng', cursive;
            background: #FFF5E0;
            color: #6D4C3D;
            text-align: center;
            padding: 0;
            margin: 0;
        }
        .container {
            max-width: 100%;
            padding: 20px;
        }
        .cat-paw {
            width: 60px;
            animation: float 2s infinite alternate;
        }
        @keyframes float {
            from { transform: translateY(0); }
            to { transform: translateY(-15px); }
        }
        .btn {
            background: #FF9A76;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 18px;
            color: white;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .btn:hover {
            transform: scale(1.05);
            background: #FF6B6B;
        }
        .result-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px auto;
            max-width: 300px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .cat-img {
            width: 100%;
            border-radius: 15px;
            margin: 10px 0;
        }
        .hidden {
            display: none;
        }
        .footer {
            margin-top: 30px;
            font-size: 14px;
            color: #888;
        }
        .social-links {
            margin: 15px 0;
        }
        .social-links a {
            color: #6D4C3D;
            margin: 0 10px;
            font-size: 20px;
            text-decoration: none;
        }
        .language-selector {
            margin: 15px 0;
        }
        .language-selector select {
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid #FF9A76;
            background: white;
            color: #6D4C3D;
            font-family: 'Ma Shan Zheng', cursive;
        }
        .stats {
            font-size: 12px;
            margin-top: 10px;
        }
        .progress-bar {
            width: 80%;
            height: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            margin: 20px auto;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: #FF9A76;
            transition: width 0.3s;
        }
        .star-prompt {
            margin: 15px 0;
            font-size: 14px;
            color: #FF6B6B;
        }
        .history-item {
            background: white;
            border-radius: 10px;
            padding: 10px;
            margin: 10px auto;
            max-width: 80%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <!-- é¦–é¡µ -->
        <div v-if="stage === 'home'">
            <img src="https://img.icons8.com/ios-filled/100/000000/cat-footprint.png" class="cat-paw">
            <h1>{{ translations[language].title }}</h1>
            <p>{{ translations[language].subtitle }}<br>{{ translations[language].disclaimer }} ğŸ¾</p>
            <button class="btn" @click="stage = 'select'">{{ translations[language].startTest }}</button>
            
            <div class="social-links">
    <a href="https://github.com/forsakens0ul/mimi" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
    <a href="https://www.xiaohongshu.com/user/profile/5f3e9111000000000100b89e?xsec_token=YBPzuETgXi0DFdhOoF6T33ndGWLB1r2wMnk0_CaV4aBtE%3D&xsec_source=app_share&xhsshare=CopyLink&appuid=5f3e9111000000000100b89e&apptime=1746690135&share_id=5872be52bc044c3caab0aff4e24944eb&share_channel=copy_link" 
       target="_blank" title="å°çº¢ä¹¦"><i class="fas fa-book"></i></a>
    <a href="#" @click="showHistory = !showHistory" title="å†å²è®°å½•"><i class="fas fa-history"></i></a>
</div>
            
            <div class="language-selector">
                <select v-model="language">
                    <option value="zh">ä¸­æ–‡</option>
                    <option value="en">English</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                </select>
            </div>
            
            <div class="stats">
                {{ translations[language].visits }}: {{ visitCount }} | 
                {{ translations[language].visitors }}: {{ visitorCount }}
            </div>
            
            <div class="star-prompt">
                <i class="fas fa-star" style="color:#FFD700;"></i> {{ translations[language].ifUseful }}
            </div>
            
            <!-- å†å²è®°å½• -->
            <div v-if="showHistory && testHistory.length > 0" style="margin-top:20px;">
                <h3>{{ translations[language].history }}</h3>
                <div v-for="(item, index) in testHistory" :key="index" class="history-item">
                    <p><strong>{{ item.date }}</strong> - {{ item.catName }}</p>
                    <button class="btn" @click="viewHistoryResult(index)" style="padding:5px 10px;font-size:12px;">æŸ¥çœ‹è¯¦æƒ…</button>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•ç±»å‹é€‰æ‹© -->
        <div v-if="stage === 'select'">
            <h2>{{ translations[language].chooseMethod }}</h2>
            <button class="btn" @click="startTest('mbti')">ğŸ§™â€â™€ï¸ {{ translations[language].mbtiCat }}</button>
            <button class="btn" @click="startTest('bazi')">ğŸ® {{ translations[language].baziCat }}</button>
            <button class="btn" @click="stage = 'home'">{{ translations[language].back }}</button>
        </div>

        <!-- MBTIæµ‹è¯•é—®é¢˜ -->
        <div v-if="stage === 'test' && testType === 'mbti'">
            <h3>{{ translations[language].question }} {{ currentQuestion + 1 }}/{{ mbtiQuestions.length }}</h3>
            <div class="progress-bar">
                <div class="progress" :style="{width: ((currentQuestion + 1) / mbtiQuestions.length) * 100 + '%'}"></div>
            </div>
            <p>{{ mbtiQuestions[currentQuestion].text }}</p>
            <div v-for="(option, index) in mbtiQuestions[currentQuestion].options" :key="index">
                <button class="btn" @click="answerQuestion(option.type)">{{ option.text }}</button>
            </div>
            <button class="btn" @click="stage = 'select'" style="background: #ccc;">{{ translations[language].back }}</button>
        </div>

        <!-- å…«å­—æµ‹è¯•é—®é¢˜ -->
        <div v-if="stage === 'test' && testType === 'bazi'">
            <h3>{{ translations[language].enterBirthInfo }}</h3>
            <input type="date" v-model="birthDate" class="btn" style="width:80%">
            <button class="btn" @click="calculateBazi">{{ translations[language].calculate }}</button>
            <button class="btn" @click="stage = 'select'" style="background: #ccc;">{{ translations[language].back }}</button>
        </div>

        <!-- ç»“æœé¡µ -->
        <div v-if="stage === 'result'" class="result-card">
            <h2>ã€{{ translations[language].yourCat }}ã€‘{{ resultCat.name }}</h2>
            <img :src="resultCat.image" class="cat-img">
            <p>ğŸ± {{ translations[language].analysis }}: {{ resultCat.description }}<br>
            ğŸ’¡ {{ translations[language].reason }}: {{ resultCat.reason }}</p>
            
            <button class="btn" @click="shareResult">{{ translations[language].share }}</button>
            <button class="btn" @click="stage = 'home'">{{ translations[language].testAgain }}</button>
            
            <div v-if="showAd" style="margin-top:20px;font-size:12px;">
                <p>{{ translations[language].adopt }} â†’ <a href="#">{{ translations[language].catShelter }}</a></p>
            </div>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                stage: 'home',
                testType: '',
                currentQuestion: 0,
                mbtiType: '',
                birthDate: '',
                resultCat: null,
                showAd: false,
                showHistory: false,
                language: 'zh',
                visitCount: 0,
                visitorCount: 0,
                testHistory: [],
                translations: {
                    zh: {
                        title: 'å–µæ˜Ÿäººæ€§æ ¼é‰´å®šä¹¦',
                        subtitle: '10ç§’è§£é”ä½ çš„å¤©å‘½çŒ«çŒ«',
                        disclaimer: 'ä¸å‡†ä¸å‡†...æ‰æ€ªï¼',
                        startTest: 'ç«‹å³æµ‹å–µ',
                        chooseMethod: 'è¯·é€‰æ‹©ä½ çš„å åœæ–¹å¼',
                        mbtiCat: 'MBTIçŒ«æ ¼ç‰ˆ',
                        baziCat: 'å…«å­—å¸çŒ«æœ¯',
                        back: 'è¿”å›',
                        question: 'ç¬¬',
                        enterBirthInfo: 'è¾“å…¥ä½ çš„å‡ºç”Ÿä¿¡æ¯',
                        calculate: 'ç«‹å³æµ‹ç®—',
                        yourCat: 'ä½ çš„æœ¬å‘½çŒ«',
                        analysis: 'çŒ«æ ¼åˆ†æ',
                        reason: 'é€‚é…ç†ç”±',
                        share: 'æ™’çŒ«æ—æŠ¤ç…§',
                        testAgain: 'å†æµ‹ä¸€æ¬¡',
                        adopt: 'é¢†å…»çœŸå®çŒ«å’ª',
                        catShelter: 'XXçŒ«èˆ',
                        version: 'ç‰ˆæœ¬',
                        ifUseful: 'å¦‚æœè§‰å¾—å¥½ç”¨ï¼Œè¯·ç»™é¡¹ç›®ç‚¹ä¸ªâ­Starå§ï¼',
                        visits: 'è®¿é—®é‡',
                        visitors: 'è®¿å®¢æ•°',
                        history: 'å†å²è®°å½•'
                    },
                    en: {
                        title: 'Cat Personality Test',
                        subtitle: 'Discover your soulmate cat in 10 seconds',
                        disclaimer: 'Not accurate... just kidding!',
                        startTest: 'Start Test',
                        chooseMethod: 'Choose your divination method',
                        mbtiCat: 'MBTI Cat Version',
                        baziCat: 'Bazi Catology',
                        back: 'Back',
                        question: 'Question',
                        enterBirthInfo: 'Enter your birth information',
                        calculate: 'Calculate Now',
                        yourCat: 'Your Destiny Cat',
                        analysis: 'Personality Analysis',
                        reason: 'Matching Reason',
                        share: 'Share Result',
                        testAgain: 'Test Again',
                        adopt: 'Adopt a real cat',
                        catShelter: 'XX Cat Shelter',
                        version: 'Version',
                        ifUseful: 'If you find it useful, please give us a â­Star!',
                        visits: 'Visits',
                        visitors: 'Visitors',
                        history: 'History'
                    },
                    ja: {
                        title: 'çŒ«ã®æ€§æ ¼è¨ºæ–­',
                        subtitle: '10ç§’ã§ã‚ãªãŸã«ã´ã£ãŸã‚Šã®çŒ«ã‚’ç™ºè¦‹',
                        disclaimer: 'å½“ãŸã‚‰ãªã„...å˜˜ã§ã™ï¼',
                        startTest: 'è¨ºæ–­ã‚’é–‹å§‹',
                        chooseMethod: 'å ã„æ–¹æ³•ã‚’é¸æŠ',
                        mbtiCat: 'MBTIçŒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³',
                        baziCat: 'å…«å­—çŒ«å ã„',
                        back: 'æˆ»ã‚‹',
                        question: 'è³ªå•',
                        enterBirthInfo: 'ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›',
                        calculate: 'è¨ºæ–­ã™ã‚‹',
                        yourCat: 'ã‚ãªãŸã«ã´ã£ãŸã‚Šã®çŒ«',
                        analysis: 'æ€§æ ¼åˆ†æ',
                        reason: 'ç›¸æ€§ã®ç†ç”±',
                        share: 'çµæœã‚’ã‚·ã‚§ã‚¢',
                        testAgain: 'ã‚‚ã†ä¸€åº¦è¨ºæ–­',
                        adopt: 'å®Ÿéš›ã®çŒ«ã‚’è¿ãˆã‚‹',
                        catShelter: 'XXçŒ«ã‚·ã‚§ãƒ«ã‚¿ãƒ¼',
                        version: 'ãƒãƒ¼ã‚¸ãƒ§ãƒ³',
                        ifUseful: 'æ°—ã«å…¥ã£ãŸã‚‰â­ã‚¹ã‚¿ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼',
                        visits: 'è¨ªå•æ•°',
                        visitors: 'è¨ªå•è€…æ•°',
                        history: 'å±¥æ­´'
                    }
                },
                mbtiQuestions: [
                    {
                        text: "å‘¨æœ«ä½ æ›´æ„¿æ„å¦‚ä½•åº¦è¿‡ï¼Ÿ",
                        options: [
                            { text: "å’ŒçŒ«å‹èšä¼šï¼ˆå¤–å‘Eï¼‰", type: "E" },
                            { text: "ç‹¬è‡ªæ’¸çŒ«ï¼ˆå†…å‘Iï¼‰", type: "I" }
                        ]
                    },
                    {
                        text: "é‡åˆ°çŒ«å’ªæ£ä¹±æ—¶ä½ ä¼šï¼Ÿ",
                        options: [
                            { text: "å…ˆæ‹ç…§å‘æœ‹å‹åœˆï¼ˆç›´è§‰Nï¼‰", type: "N" },
                            { text: "ç«‹å³æ”¶æ‹¾æ®‹å±€ï¼ˆå®æ„ŸSï¼‰", type: "S" }
                        ]
                    },
                    {
                        text: "é€‰æ‹©çŒ«ç²®æ—¶ä½ æ›´æ³¨é‡ï¼Ÿ",
                        options: [
                            { text: "è¥å…»æˆåˆ†è¡¨ï¼ˆæ€è€ƒTï¼‰", type: "T" },
                            { text: "çŒ«å’ªåƒå¾—å¼€å¿ƒï¼ˆæƒ…æ„ŸFï¼‰", type: "F" }
                        ]
                    },
                    {
                        text: "ä½ çš„å…»çŒ«è®¡åˆ’é€šå¸¸æ˜¯ï¼Ÿ",
                        options: [
                            { text: "ä¸¥æ ¼æŒ‰æ—¶é—´è¡¨ï¼ˆåˆ¤æ–­Jï¼‰", type: "J" },
                            { text: "çœ‹å¿ƒæƒ…éšæ€§æ¥ï¼ˆæ„ŸçŸ¥Pï¼‰", type: "P" }
                        ]
                    },
                    {
                        text: "çŒ«å’ªç”Ÿç—…æ—¶ä½ çš„ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ",
                        options: [
                            { text: "å†·é™åˆ†æç—‡çŠ¶ï¼ˆæ€è€ƒTï¼‰", type: "T" },
                            { text: "éå¸¸æ‹…å¿ƒç„¦è™‘ï¼ˆæƒ…æ„ŸFï¼‰", type: "F" }
                        ]
                    },
                    {
                        text: "ä½ æ›´å–œæ¬¢å“ªç§çŒ«å’ªï¼Ÿ",
                        options: [
                            { text: "æ´»æ³¼å¥½åŠ¨çš„ï¼ˆå¤–å‘Eï¼‰", type: "E" },
                            { text: "å®‰é™æ…µæ‡’çš„ï¼ˆå†…å‘Iï¼‰", type: "I" }
                        ]
                    },
                    {
                        text: "ç»™çŒ«å’ªæ‹ç…§æ—¶ä½ ä¼šï¼Ÿ",
                        options: [
                            { text: "ç²¾å¿ƒè®¾è®¡åœºæ™¯ï¼ˆåˆ¤æ–­Jï¼‰", type: "J" },
                            { text: "æ•æ‰è‡ªç„¶ç¬é—´ï¼ˆæ„ŸçŸ¥Pï¼‰", type: "P" }
                        ]
                    },
                    {
                        text: "çœ‹åˆ°æµæµªçŒ«æ—¶ä½ ä¼šï¼Ÿ",
                        options: [
                            { text: "æƒ³è±¡å®ƒçš„æ•…äº‹ï¼ˆç›´è§‰Nï¼‰", type: "N" },
                            { text: "è§‚å¯Ÿå®ƒçš„çŠ¶æ€ï¼ˆå®æ„ŸSï¼‰", type: "S" }
                        ]
                    }
                ],
                catDatabase: {
                    "INTJ": {
                        name: "é«˜å†·ä¿„ç½—æ–¯è“çŒ«",
                        image: "https://cdn.pixabay.com/photo/2017/02/20/18/03/cat-2083492_640.jpg",
                        description: "æ™ºå•†çˆ†è¡¨çš„çŒ«ä¸­å“²å­¦å®¶",
                        reason: "ä½ ä»¬éƒ½æ˜¯ç†æ€§è‡³ä¸Šä¸»ä¹‰è€…ï¼Œæ“…é•¿ç”¨çœ¼ç¥è¡¨è¾¾'æ„šè ¢çš„äººç±»'"
                    },
                    "INTP": {
                        name: "æ€è€ƒè€…è‹æ ¼å…°æŠ˜è€³çŒ«",
                        image: "https://cdn.pixabay.com/photo/2015/03/27/13/16/cat-694730_640.jpg",
                        description: "å¥½å¥‡å¿ƒæ—ºç››çš„çŒ«ä¸­ç§‘å­¦å®¶",
                        reason: "ä½ ä»¬éƒ½å–œæ¬¢ç‹¬ç«‹æ€è€ƒï¼Œå¸¸å¸¸é™·å…¥è‡ªå·±çš„ä¸–ç•Œ"
                    },
                    "ENTJ": {
                        name: "é¢†è¢–å‹ç¼…å› çŒ«",
                        image: "https://cdn.pixabay.com/photo/2017/07/25/01/22/cat-2536662_640.jpg",
                        description: "æ°”åœºå¼ºå¤§çš„çŒ«ä¸­CEO",
                        reason: "ä½ ä»¬éƒ½æœ‰é¢†å¯¼æ°”è´¨ï¼Œå–œæ¬¢æŒæ§å±€é¢"
                    },
                    "ENTP": {
                        name: "è¾©è®ºå®¶å¾·æ–‡å·æ¯›çŒ«",
                        image: "https://cdn.pixabay.com/photo/2014/04/13/20/49/cat-323262_640.jpg",
                        description: "æœºçµå¤æ€ªçš„çŒ«ä¸­å‘æ˜å®¶",
                        reason: "ä½ ä»¬éƒ½èƒ½ç”¨åˆ›æ„å’Œå¹½é»˜åŒ–è§£å°´å°¬"
                    },
                    "INFJ": {
                        name: "æ²»æ„ˆç³»å¸ƒå¶çŒ«",
                        image: "https://cdn.pixabay.com/photo/2015/11/16/14/43/cat-1045782_640.jpg",
                        description: "æ¸©æŸ”ä½“è´´çš„çŒ«ä¸­å¿ƒç†å’¨è¯¢å¸ˆ",
                        reason: "ä½ ä»¬éƒ½èƒ½æ•é”å¯Ÿè§‰ä»–äººæƒ…ç»ª"
                    },
                    "INFP": {
                        name: "ç†æƒ³ä¸»ä¹‰æš¹ç½—çŒ«",
                        image: "https://cdn.pixabay.com/photo/2015/11/16/22/14/cat-1046544_640.jpg",
                        description: "æƒ…æ„Ÿä¸°å¯Œçš„çŒ«ä¸­è¯—äºº",
                        reason: "ä½ ä»¬éƒ½æœ‰ä¸°å¯Œçš„å†…å¿ƒä¸–ç•Œ"
                    },
                    "ENFJ": {
                        name: "æ•™è‚²å®¶é˜¿æ¯”è¥¿å°¼äºšçŒ«",
                        image: "https://cdn.pixabay.com/photo/2017/11/09/21/41/cat-2934720_640.jpg",
                        description: "çƒ­æƒ…æ´‹æº¢çš„çŒ«ä¸­å¯¼å¸ˆ",
                        reason: "ä½ ä»¬éƒ½å–œæ¬¢é¼“åŠ±å’Œå¸®åŠ©ä»–äºº"
                    },
                    "ENFP": {
                        name: "è¯ç—¨æš¹ç½—çŒ«",
                        image: "https://cdn.pixabay.com/photo/2018/05/07/10/48/cat-3380960_640.jpg",
                        description: "ç¤¾äº¤ç‰›é€¼ç—‡æ‚£è€…",
                        reason: "ä½ ä»¬éƒ½èƒ½åœ¨5åˆ†é’Ÿå†…å’Œé™Œç”Ÿäººæˆä¸ºæœ‹å‹"
                    },
                    "ISTJ": {
                        name: "åŠ¡å®å‹è‹±å›½çŸ­æ¯›çŒ«",
                        image: "https://cdn.pixabay.com/photo/2014/03/29/09/17/cat-300572_640.jpg",
                        description: "å¯é å®ˆæ—¶çš„çŒ«ä¸­å…¬åŠ¡å‘˜",
                        reason: "ä½ ä»¬éƒ½é‡è§†ä¼ ç»Ÿå’Œè§„åˆ™"
                    },
                    "ISFJ": {
                        name: "å®ˆæŠ¤è€…æ³¢æ–¯çŒ«",
                        image: "https://cdn.pixabay.com/photo/2015/01/31/12/36/cat-618470_640.jpg",
                        description: "æ¸©æŸ”é¡¾å®¶çš„çŒ«ä¸­æŠ¤å£«",
                        reason: "ä½ ä»¬éƒ½ä¹äºç…§é¡¾ä»–äºº"
                    },
                    "ESTJ": {
                        name: "ç®¡ç†è€…ç¾å›½çŸ­æ¯›çŒ«",
                        image: "https://cdn.pixabay.com/photo/2017/03/14/14/49/cat-2143332_640.jpg",
                        description: "æ•ˆç‡è‡³ä¸Šçš„çŒ«ä¸­é¡¹ç›®ç»ç†",
                        reason: "ä½ ä»¬éƒ½æ“…é•¿ç»„ç»‡å’Œæ‰§è¡Œ"
                    },
                    "ESFJ": {
                        name: "ç…§é¡¾è€…åŠ è²çŒ«",
                        image: "https://cdn.pixabay.com/photo/2015/11/16/22/14/cat-1046544_640.jpg",
                        description: "æ¸©æš–è´´å¿ƒçš„çŒ«ä¸­æ´¾å¯¹ç­–åˆ’",
                        reason: "ä½ ä»¬éƒ½çƒ­çˆ±ç¤¾äº¤å’Œç…§é¡¾ä»–äºº"
                    },
                    "ISTP": {
                        name: "å·§åŒ å‹è±¹çŒ«",
                        image: "https://cdn.pixabay.com/photo/2017/01/20/21/22/cat-1996421_640.jpg",
                        description: "å†·é™æ²‰ç€çš„çŒ«ä¸­æœºæ¢°å¸ˆ",
                        reason: "ä½ ä»¬éƒ½æ“…é•¿è§£å†³å®é™…é—®é¢˜"
                    },
                    "ISFP": {
                        name: "è‰ºæœ¯å®¶é‡‘å‰æ‹‰çŒ«",
                        image: "https://cdn.pixabay.com/photo/2014/04/13/20/49/cat-323262_640.jpg",
                        description: "æ•æ„Ÿç»†è…»çš„çŒ«ä¸­ç”»å®¶",
                        reason: "ä½ ä»¬éƒ½é‡è§†å½“ä¸‹çš„ç¾æ„Ÿä½“éªŒ"
                    },
                    "ESTP": {
                        name: "å†’é™©å®¶å­ŸåŠ æ‹‰çŒ«",
                        image: "https://cdn.pixabay.com/photo/2015/04/23/21/59/cat-736877_640.jpg",
                        description: "æ´»åŠ›å››å°„çš„çŒ«ä¸­è¿åŠ¨å‘˜",
                        reason: "ä½ ä»¬éƒ½çƒ­çˆ±å†’é™©å’Œåˆºæ¿€"
                    },
                    "ESFP": {
                        name: "è¡¨æ¼”è€…åœŸè€³å…¶å®‰å“¥æ‹‰çŒ«",
                        image: "https://cdn.pixabay.com/photo/2015/01/31/12/36/cat-618470_640.jpg",
                        description: "é­…åŠ›åè¶³çš„çŒ«ä¸­æ˜æ˜Ÿ",
                        reason: "ä½ ä»¬éƒ½æ“…é•¿æ´»è·ƒæ°”æ°›"
                    },
                    "default": {
                        name: "ä¸­åæ°”æ­»çŒ«",
                        image: "https://cdn.pixabay.com/photo/2014/04/13/20/49/cat-323262_640.jpg",
                        description: "åˆæ‡’åˆé¦‹ä½†æ²»æ„ˆåŠ›MAX",
                        reason: "ä½ ä»¬ç»„åˆèµ·æ¥å°±æ˜¯'èººå¹³ç•Œ'çš„é»„é‡‘CP"
                    }
                }
            },
            methods: {
                startTest(type) {
        this.testType = type;
        this.stage = 'test';
        this.currentQuestion = 0;
        this.mbtiType = '';
        // åˆå§‹åŒ–ç»´åº¦ç»Ÿè®¡
        this.mbtiCounts = {
            E: 0,
            I: 0,
            N: 0,
            S: 0,
            T: 0,
            F: 0,
            J: 0,
            P: 0
        };
    },
    answerQuestion(type) {
        // ç»Ÿè®¡æ¯ä¸ªç»´åº¦çš„é€‰æ‹©æ¬¡æ•°
        this.mbtiCounts[type]++;
        
        if (this.currentQuestion < this.mbtiQuestions.length - 1) {
            this.currentQuestion++;
        } else {
            // æ ¹æ®ç»Ÿè®¡ç»“æœç¡®å®šæœ€ç»ˆMBTIç±»å‹
            this.determineMBTIType();
        }
    },
    determineMBTIType() {
        // æ ¹æ®å¤šæ•°ç»“æœç¡®å®šæ¯ä¸ªç»´åº¦çš„ç±»å‹
        const EI = this.mbtiCounts.E > this.mbtiCounts.I ? 'E' : 'I';
        const NS = this.mbtiCounts.N > this.mbtiCounts.S ? 'N' : 'S';
        const TF = this.mbtiCounts.T > this.mbtiCounts.F ? 'T' : 'F';
        const JP = this.mbtiCounts.J > this.mbtiCounts.P ? 'J' : 'P';
        
        this.mbtiType = EI + NS + TF + JP;
        this.showResult();
    },
                calculateBazi() {
                    if (!this.birthDate) {
                        alert(this.translations[this.language].enterBirthInfo);
                        return;
                    }
                    // ç®€åŒ–çš„å…«å­—è®¡ç®—ï¼ˆå®é™…åº”è°ƒç”¨ä¸“ä¸šåº“ï¼‰
                    const month = new Date(this.birthDate).getMonth() + 1;
                    const day = new Date(this.birthDate).getDate();
                    
                    // æ ¹æ®å‡ºç”Ÿæ—¥æœŸç”ŸæˆMBTIç±»å‹
                    const types = ["INTJ", "INTP", "ENTJ", "ENTP", "INFJ", "INFP", "ENFJ", "ENFP", 
                                  "ISTJ", "ISFJ", "ESTJ", "ESFJ", "ISTP", "ISFP", "ESTP", "ESFP"];
                    const index = (month * day) % types.length;
                    this.mbtiType = types[index];
                    
                    this.showResult();
                },
                showResult() {
                    this.resultCat = this.catDatabase[this.mbtiType] || this.catDatabase["default"];
                    this.stage = 'result';
                    setTimeout(() => { this.showAd = true }, 2000);
                    
                    // ä¿å­˜æµ‹è¯•ç»“æœåˆ°å†å²è®°å½•
                    this.saveToHistory();
                },
                shareResult() {
                    alert(this.translations[this.language].share + "\n" + 
                          "å®é™…é¡¹ç›®éœ€æ¥å…¥å¾®ä¿¡SDKæˆ–åˆ†äº«API");
                },
                saveToHistory() {
                    const historyItem = {
                        date: new Date().toLocaleString(),
                        catName: this.resultCat.name,
                        mbtiType: this.mbtiType,
                        result: this.resultCat
                    };
                    
                    this.testHistory.unshift(historyItem);
                    localStorage.setItem('catTestHistory', JSON.stringify(this.testHistory));
                },
                viewHistoryResult(index) {
                    this.resultCat = this.testHistory[index].result;
                    this.stage = 'result';
                },
                recordVisit() {
                    // ä½¿ç”¨æµè§ˆå™¨æŒ‡çº¹è¯†åˆ«è®¿å®¢
                    const visitorId = this.getVisitorId();
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯æ–°è®¿å®¢
                    const lastVisit = localStorage.getItem('lastVisit');
                    const now = new Date().getTime();
                    
                    // æ›´æ–°è®¿é—®é‡
                    this.visitCount = parseInt(localStorage.getItem('visitCount') || 0) + 1;
                    localStorage.setItem('visitCount', this.visitCount);
                    
                    // å¦‚æœæ˜¯æ–°è®¿å®¢æˆ–è¶…è¿‡24å°æ—¶æœªè®¿é—®
                    if (!lastVisit || (now - lastVisit) > 24 * 60 * 60 * 1000) {
                        this.visitorCount = parseInt(localStorage.getItem('visitorCount') || 0) + 1;
                        localStorage.setItem('visitorCount', this.visitorCount);
                        localStorage.setItem('lastVisit', now);
                    }
                    
                    // å®é™…é¡¹ç›®ä¸­åº”è¯¥å‘é€åˆ°åç«¯æœåŠ¡å™¨è¿›è¡Œæ›´å‡†ç¡®çš„ç»Ÿè®¡
                    // this.sendStatsToServer(visitorId);
                },
                getVisitorId() {
                    // ç”Ÿæˆç®€å•çš„è®¿å®¢IDï¼ˆå®é™…é¡¹ç›®åº”ä½¿ç”¨æ›´å¤æ‚çš„æŒ‡çº¹ç®—æ³•ï¼‰
                    let visitorId = localStorage.getItem('visitorId');
                    if (!visitorId) {
                        visitorId = 'visitor-' + Math.random().toString(36).substr(2, 9);
                        localStorage.setItem('visitorId', visitorId);
                    }
                    return visitorId;
                },
                loadStats() {
                    // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç»Ÿè®¡æ•°æ®
                    this.visitCount = parseInt(localStorage.getItem('visitCount') || 0);
                    this.visitorCount = parseInt(localStorage.getItem('visitorCount') || 0);
                    
                    // åŠ è½½å†å²è®°å½•
                    const savedHistory = localStorage.getItem('catTestHistory');
                    if (savedHistory) {
                        this.testHistory = JSON.parse(savedHistory);
                    }
                }
            },
            mounted() {
                // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¯­è¨€åå¥½
                const savedLang = localStorage.getItem('catTestLang');
                if (savedLang) this.language = savedLang;
                
                // åŠ è½½ç»Ÿè®¡æ•°æ®å’Œå†å²è®°å½•
                this.loadStats();
                
                // åˆå§‹è®°å½•è®¿é—®
                this.recordVisit();
            },
            watch: {
                language(newLang) {
                    localStorage.setItem('catTestLang', newLang);
                }
            }
        });
    </script>
</body>
</html>
